<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Refrigerant Tracker – Cowboys AC</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 1. Fixed header -->
  <div id="floating-bar">
    <div class="info-panels">
      <div>Installs Today: <span id="installs-count">0</span></div>
      <div id="current-datetime"></div>
      <div id="weather-info">72°F Sunny</div>
    </div>
    <a href="internal-dashboard.html" class="office-button btn">Office Use Only</a>
  </div>

  <!-- 2. Centered logo -->
  <div class="logo-container">
    <img src="assets/Cowboys_Logo.png" alt="Cowboys AC Logo" class="logo" />
  </div>

  <!-- 3. Main content -->
  <main class="container">
    <div class="testing-banner">FOR TESTING PURPOSES ONLY</div>
    <h1 style="text-align:center; margin-bottom:1.5rem;">Refrigerant Tracker</h1>

    <form id="tracker-form">
      <!-- Step 1: Role -->
      <div class="wizard-grid" id="step-1">
        <button type="button" class="option-button" data-step="1" data-role="Technician">Technician</button>
        <button type="button" class="option-button" data-step="1" data-role="Installer">Installer</button>
      </div>

      <!-- Step 2: Employee -->
      <div class="wizard-grid" id="step-2" style="display:none;"></div>

      <!-- Step 3: Invoice -->
      <div id="step-3" style="display:none; text-align:center; margin-bottom:1.5rem;">
        <input type="text" id="invoice" placeholder="Invoice #" style="padding:.75rem; width:80%; font-size:1rem;" />
        <button type="button" id="next-3" class="btn" disabled>Next</button>
      </div>

      <!-- Step 4: Refrigerant Type -->
      <div class="wizard-grid" id="step-4" style="display:none;"></div>

      <!-- Step 5: Tank Number -->
      <div class="wizard-grid" id="step-5" style="display:none;"></div>

      <!-- Step 6: Amount Used -->
      <div id="step-6" style="display:none; text-align:center; margin-bottom:1.5rem;">
        <div class="quantity-control">
          <button type="button" id="decrease" class="btn">-</button>
          <input type="number" id="amount" value="0" step="0.5" min="0" max="25.5" readonly />
          <button type="button" id="increase" class="btn">+</button>
        </div>
        <button type="button" id="next-6" class="btn" disabled>Next</button>
      </div>

      <!-- Step 7: Signature & Submit -->
      <div id="step-7" style="display:none; text-align:center; margin-bottom:1.5rem;">
        <input type="text" id="signature" placeholder="Type your name to sign" style="padding:.75rem; width:80%; font-size:1rem;" />
        <button type="submit" id="submit-btn" class="btn" disabled>Submit</button>
      </div>
    </form>
  </main>

  <script src="script.js"></script>
  <script>
    // Mirror your index.js wizard logic
    const steps = ['step-1','step-2','step-3','step-4','step-5','step-6','step-7'];
    let selectedRole, selectedEmployee, invoiceNum, refrigType, selectedTank;

    // Utility: show one step
    function show(id) {
      steps.forEach(s => document.getElementById(s).style.display = (s === id ? (s==='step-1'||s==='step-2'||s==='step-4'||s==='step-5'?'grid':'block') : 'none'));
    }

    // Step 1: Role
    document.querySelectorAll('#step-1 .option-button').forEach(btn => {
      btn.onclick = () => {
        selectedRole = btn.dataset.role;
        // populate employees
        const grid = document.getElementById('step-2');
        grid.innerHTML = '';
        for(let i=1;i<=15;i++){
          const b = document.createElement('button');
          b.type = 'button'; b.className = 'option-button';
          b.textContent = `Employee ${i}`;
          b.onclick = () => { selectedEmployee = b.textContent; show('step-3'); };
          grid.appendChild(b);
        }
        show('step-2');
      };
    });

    // Step 3: Invoice
    const inv = document.getElementById('invoice'), n3 = document.getElementById('next-3');
    inv.oninput = () => n3.disabled = !inv.value.trim();
    n3.onclick = () => { invoiceNum = inv.value.trim(); 
      // populate types
      const grid = document.getElementById('step-4');
      grid.innerHTML = '';
      ['R-410A','R-454B'].forEach(type => {
        const b = document.createElement('button');
        b.type = 'button'; b.className='option-button';
        b.textContent = type;
        b.onclick = () => { refrigType = type; 
          // populate tanks
          const tgrid = document.getElementById('step-5');
          tgrid.innerHTML = '';
          for(let i=1;i<=10;i++){
            const tb = document.createElement('button');
            tb.type='button'; tb.className='option-button';
            tb.textContent=`Tank ${i}`;
            tb.onclick=()=>{ selectedTank = i; show('step-6'); };
            tgrid.appendChild(tb);
          }
          show('step-5');
        };
        grid.appendChild(b);
      });
      show('step-4');
    };

    // Step 6: Amount
    const amt = document.getElementById('amount'), n6 = document.getElementById('next-6');
    document.getElementById('increase').onclick = () => updateAmt(0.5);
    document.getElementById('decrease').onclick = () => updateAmt(-0.5);
    function updateAmt(delta) {
      let v = parseFloat(amt.value) + delta;
      v = Math.min(Math.max(v,0),25.5);
      amt.value = v.toFixed(1);
      n6.disabled = !(v>0);
    }
    n6.onclick = () => show('step-7');

    // Step 7: Signature & Submit
    const sig = document.getElementById('signature'), sb = document.getElementById('submit-btn');
    sig.oninput = () => sb.disabled = !sig.value.trim();
    document.getElementById('tracker-form').onsubmit = e => {
      e.preventDefault();
      const body = encodeURIComponent(
        `Role: ${selectedRole}\\nEmployee: ${selectedEmployee}\\nInvoice #: ${invoiceNum}\\nType: ${refrigType}\\nTank #: ${selectedTank}\\nAmount Used: ${amt.value} lbs\\nSignature: ${sig.value.trim()}`
      );
      location.href = `mailto:warehouse@cowboysac.com,michael@cowboysac.com,alfonso@cowboysac.com?subject=${encodeURIComponent('Refrigerant Usage Log')}&body=${body}`;
    };

    // Floating bar: date/time & weather
    function updateDateTime(){ document.getElementById('current-datetime').textContent = new Date().toLocaleString(); }
    setInterval(updateDateTime,1000); updateDateTime();
    document.getElementById('weather-info').textContent = '72°F Sunny';

    // Kick off
    show('step-1');
  </script>
</body>
</html>
