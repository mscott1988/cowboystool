<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Refrigerant Tracker – Cowboys AC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Enhance buttons for iPad touch targets */
    .option-button, .btn {
      padding: 1.5rem 2rem;
      font-size: 1.25rem;
      border-radius: 10px;
    }
    .wizard-grid {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.5rem;
    }
  </style>
</head>
<body>
  <!-- Fixed header -->
  <div id="floating-bar">
    <div class="info-panels">
      <div>Installs Today: <span id="installs-count">0</span></div>
      <div id="current-datetime"></div>
      <div id="weather-info">--°F --</div>
    </div>
    <a href="internal-dashboard.html" class="office-button btn">Office Use Only</a>
  </div>

  <!-- Centered logo -->
  <div class="logo-container">
    <img src="assets/Cowboys_Logo.png" alt="Cowboys AC Logo" class="logo" />
  </div>

  <!-- Main content -->
  <main class="container">
    <div class="testing-banner">FOR TESTING PURPOSES ONLY</div>
    <h1 style="text-align:center; margin-bottom:2rem;">Refrigerant Tracker</h1>
    <form id="tracker-form">
      <!-- Step 1 -->
      <div class="wizard-grid" id="step-1">
        <button type="button" class="option-button" data-role="Technician">Technician</button>
        <button type="button" class="option-button" data-role="Installer">Installer</button>
      </div>
      <!-- Step 2 -->
      <div class="wizard-grid" id="step-2" style="display:none;"></div>
      <!-- Step 3 -->
      <div id="step-3" style="display:none; text-align:center; margin-bottom:2rem;">
        <input type="text" id="invoice" placeholder="Invoice #" style="padding:1rem; font-size:1.25rem; width:90%; max-width:400px;" />
        <button type="button" id="next-3" class="btn" disabled>Next</button>
      </div>
      <!-- Step 4 -->
      <div class="wizard-grid" id="step-4" style="display:none;"></div>
      <!-- Step 5 -->
      <div class="wizard-grid" id="step-5" style="display:none;"></div>
      <!-- Step 6 -->
      <div id="step-6" style="display:none; text-align:center; margin-bottom:2rem;">
        <div class="quantity-control" style="gap:1rem;">
          <button id="decrease" class="btn">-</button>
          <input type="number" id="amount" value="0" step="0.5" min="0" max="25.5" readonly style="font-size:1.25rem; width:80px; text-align:center;" />
          <button id="increase" class="btn">+</button>
        </div>
        <button type="button" id="next-6" class="btn" disabled>Next</button>
      </div>
      <!-- Step 7 -->
      <div id="step-7" style="display:none; text-align:center; margin-bottom:2rem;">
        <input type="text" id="signature" placeholder="Type your name to sign" style="padding:1rem; font-size:1.25rem; width:90%; max-width:400px;" />
        <button type="submit" id="submit-btn" class="btn" disabled>Submit</button>
      </div>
    </form>
  </main>

  <script src="script.js"></script>
  <script>
    // Floating bar updates
    function updateDateTime(){ document.getElementById('current-datetime').textContent = new Date().toLocaleString(); }
    setInterval(updateDateTime,1000); updateDateTime();
    document.getElementById('weather-info').textContent = '72°F Sunny';

    // Wizard logic
    const steps = ['step-1','step-2','step-3','step-4','step-5','step-6','step-7'];
    let selectedRole, selectedEmployee, invoiceNum, refrigType, selectedTank;
    function show(id){ steps.forEach(s=>{ const el=document.getElementById(s); el.style.display=(s===id? (s.startsWith('step-')&&(s!=='step-3'&&s!=='step-6'&&s!=='step-7')?'grid':'block') : 'none'); }); }

    // Step 1
    document.querySelectorAll('#step-1 .option-button').forEach(btn=>{
      btn.onclick=()=>{
        selectedRole=btn.dataset.role;
        const grid=document.getElementById('step-2'); grid.innerHTML='';
        for(let i=1;i<=15;i++){ const b=document.createElement('button'); b.type='button'; b.className='option-button'; b.textContent=`Employee ${i}`; b.onclick=()=>{ selectedEmployee=b.textContent; show('step-3'); }; grid.appendChild(b);}        
        show('step-2');
      };
    });

    // Step 3
    const inv=document.getElementById('invoice'), n3=document.getElementById('next-3');
    inv.oninput=()=>n3.disabled=!inv.value.trim();
    n3.onclick=()=>{
      invoiceNum=inv.value.trim();
      const grid=document.getElementById('step-4'); grid.innerHTML='';
      ['R-410A','R-454B'].forEach(type=>{ const b=document.createElement('button'); b.type='button'; b.className='option-button'; b.textContent=type; b.onclick=()=>{ refrigType=type; const tgrid=document.getElementById('step-5'); tgrid.innerHTML=''; for(let i=1;i<=10;i++){ const tb=document.createElement('button'); tb.type='button'; tb.className='option-button'; tb.textContent=`Tank ${i}`; tb.onclick=()=>{ selectedTank=i; show('step-6'); }; tgrid.appendChild(tb);} show('step-5'); }; grid.appendChild(b);} );
      show('step-4');
    };

    // Step 6
    const amt=document.getElementById('amount'), n6=document.getElementById('next-6');
    document.getElementById('increase').onclick=()=>updateAmt(0.5);
    document.getElementById('decrease').onclick=()=>updateAmt(-0.5);
    function updateAmt(delta){ let v=parseFloat(amt.value)+delta; v=Math.min(Math.max(v,0),25.5); amt.value=v.toFixed(1); n6.disabled=!(v>0);}    
    n6.onclick=()=>show('step-7');

    // Step 7
    const sig=document.getElementById('signature'), sb=document.getElementById('submit-btn');
    sig.oninput=()=>sb.disabled=!sig.value.trim();
    document.getElementById('tracker-form').onsubmit=e=>{ e.preventDefault(); const body=encodeURIComponent(
        `Role: ${selectedRole}\nEmployee: ${selectedEmployee}\nInvoice #: ${invoiceNum}\nType: ${refrigType}\nTank #: ${selectedTank}\nAmount Used: ${amt.value} lbs\nSignature: ${sig.value.trim()}`
      );
      location.href=`mailto:warehouse@cowboysac.com,michael@cowboysac.com,alfonso@cowboysac.com?subject=${encodeURIComponent('Refrigerant Usage Log')}&body=${body}`;
    };

    // Init
    show('step-1');
  </script>
</body>
</html>""" 

# Write to file
with open('/mnt/data/refrigerant-tracker.html', 'w') as f:
    f.write(style_content)

